"use strict";!function(a){function b(a){a.$menu.show().addClass("opened"),setTimeout(function(){a.$menuExpandedClassTarget.addClass(a.menuExpandedClass),a.$menuToggle.attr({"aria-expanded":"true"}).attr("disabled","disabled")},100)}function c(a,b){a.$menuExpandedClassTarget.removeClass(a.menuExpandedClass),a.$menuToggle.attr({"aria-expanded":"false"}),a.$overlay.removeAttr("style"),setTimeout(function(){a.$menu.removeAttr("style").removeClass("opened"),a.$menuToggle.removeAttr("disabled")},b)}a.OffCanvasMenuController=function(a){if(a=a||{},this.$menu=a.$menu,this.menu=this.$menu[0],this.menuExpandedClass=a.menuExpandedClass,0!=this.$menu.length&&this.menuExpandedClass){this.$menuToggle=a.$menuToggle||[],this.position=a.position||"left",this.$wrapper=a.wrapper||this.$menu.parent(),this.wrapper=this.$wrapper[0],this.$menuExpandedClassTarget=a.$menuExpandedClassTarget||this.$wrapper,this.dragHandleOffset=a.dragHandleOffset||this.$menuToggle.outerWidth(),this.expandedWidth=this.$menu.outerWidth(),this.ariaControls=a.ariaControls||this.$menu.selector.replace("#",""),$(".off-canvas-overlay").length||this.$wrapper.append('<div class="off-canvas-overlay"></div>'),this.$overlay=a.$overlay||$(".off-canvas-overlay"),this.overlay=this.$overlay[0],this.overlayOpacity=a.overlayOpacity||"0.75";var d=this.$menu.css("transition-duration");if(this.transitionDuration=1e3*d.replace("s",""),this.$menuToggle.length>0){var e=this;this.$menuToggle.attr({role:"button","aria-controls":e.ariaControls,"aria-expanded":"false"}),this.$menuToggle.click(function(a){a.stopPropagation(),b(e,e.transitionDuration)}),this.$wrapper.click(function(){c(e,e.transitionDuration)}),this.$menu.click(function(a){a.stopPropagation()}),"left"===this.position&&(this.$menu.find("li:first-child a").bind("keydown",function(a){9===a.keyCode&&e.$menuExpandedClassTarget.hasClass(e.menuExpandedClass)&&a.shiftKey&&(a.preventDefault(),e.$menuToggle.focus())}),this.$menuToggle.bind("keydown",function(a){9===a.keyCode&&e.$menuExpandedClassTarget.hasClass(e.menuExpandedClass)&&(a.shiftKey||(a.preventDefault(),e.$menu.find("li:first-child a").focus()))})),"right"===this.position&&(this.$menuToggle.bind("keydown",function(a){9===a.keyCode&&e.$menuExpandedClassTarget.hasClass(e.menuExpandedClass)&&a.shiftKey&&(a.preventDefault(),e.$menu.find("li:last-child a").focus())}),this.$menu.find("li:last-child a").bind("keydown",function(a){9===a.keyCode&&e.$menuExpandedClassTarget.hasClass(e.menuExpandedClass)&&(a.shiftKey||(a.preventDefault(),e.$menuToggle.focus()))})),$(document).bind("keydown",function(a){27===a.keyCode&&e.$menuExpandedClassTarget.hasClass(e.menuExpandedClass)&&(c(e,e.transitionDuration),e.$menuToggle.focus())})}this.wrapper.addEventListener&&(this.wrapper.addEventListener("touchstart",this,!1),this.wrapper.addEventListener("touchmove",this,!1),this.wrapper.addEventListener("touchend",this,!1),this.wrapper.addEventListener("touchcancel",this,!1))}},a.OffCanvasMenuController.prototype={start:null,handleEvent:function(a){switch(a.type){case"touchstart":this.onTouchStart(a);break;case"touchmove":this.onTouchMove(a);break;case"touchcancel":case"touchend":this.onTouchEnd(a)}},currentPosition:function(){return"left"==this.position?this.$menu.offset().left+this.expandedWidth:this.$menu.offset().left},inBounds:function(a){return"left"==this.position&&a>=0&&a<=this.expandedWidth||a>=-this.expandedWidth&&0>=a},onTouchStart:function(a){if(this.$menuExpandedClassTarget.hasClass(this.menuExpandedClass)){var b=a.touches[0].pageX;this.start={startingX:this.currentPosition(),pageX:b,pageY:a.touches[0].pageY},this.deltaX=this.$wrapper.position().left,this.isScrolling=void 0,this.menu.style.MozTransitionDuration=this.menu.style.webkitTransitionDuration=0,a.stopPropagation()}},onTouchMove:function(b){if(this.deltaX=b.touches[0].pageX-this.start.pageX,"undefined"==typeof this.isScrolling&&(this.isScrolling=!!(this.isScrolling||Math.abs(this.deltaX)<Math.abs(b.touches[0].pageY-this.start.pageY))),!this.isScrolling){b.preventDefault();var c="left"==this.position?this.start.startingX+this.deltaX:this.deltaX-($(a).width()-this.start.startingX),d=this.overlayOpacity/this.expandedWidth*Math.abs(c);if(!this.inBounds(c))return;this.menu.style.MozTransform=this.menu.style.webkitTransform="translate("+c+"px,0)",this.overlay.style.opacity=d,b.stopPropagation()}},onTouchEnd:function(d){var e=this;if(this.start){var f="left"==this.position?this.start.startingX+this.deltaX:this.deltaX-($(a).width()-this.start.startingX);f=Math.abs(f),this.isScrolling||(this.$menu.removeAttr("style"),f<=.66*e.expandedWidth?c(e,e.transitionDuration):(b(e),this.$overlay.removeAttr("style"))),this.start=null,d.stopPropagation()}}}}(window);